<template name="avalaraSettings">

  {{#unless packageData.settings.avalara.apiLoginId}}
  <div class="alert alert-info">
    <span data-i18n="admin.taxSettings.avalaraCredentials">Add API Login ID to enable</span>
    <a href="https://www.avalara.com/" target="_blank">Avalara</a>
  </div>
  {{/unless}}

  {{#autoForm collection=Collections.Packages schema=packageConfigSchema doc=packageData type="update" id="avalara-update-form"}}
      <div class="panel-body">
        {{>afQuickField name='settings.avalara.apiLoginId' class='form-control'}}
      </div>
    <div class="panel-body">
      {{>afQuickField name='settings.avalara.username' class='form-control'}}
    </div>
    <div class="panel-body">
      {{>afQuickField name='settings.avalara.password' class='form-control' type='password'}}
    </div>
    <div class="panel-body">
      {{>afQuickField name='settings.avalara.companyCode' class='form-control'}}
    </div>
    <div class="panel-body">
      {{>afQuickField name='settings.avalara.shippingTaxCode' class='form-control'}}
    </div>
    <div class="panel-body">
      {{>afQuickField name='settings.avalara.mode' class='form-control'}}
    </div>
    <div class="panel-body">
      {{>afQuickField name='settings.avalara.performTaxCalculation' class='form-control'}}
    </div>
    <div class="panel-body">
      {{>afQuickField name='settings.addressValidation.enabled' class='form-control'}}
    </div>
    <div class="panel-body">
      {{> afQuickField name="settings.addressValidation.countryList" type="select-checkbox" options=countryOptions value=country }}
    </div>
    <div class="panel-body">
      {{>afQuickField name='settings.avalara.enableLogging' class='form-control'}}
    </div>
    <div class="panel-body">
      {{>afQuickField name='settings.avalara.logRetentionDuration' class='form-control'}}
    </div>
    <div class="panel-body">
      {{>afQuickField name='settings.avalara.requestTimeout' class='form-control'}}
    </div>
    <div class="panel-body">
      {{>afQuickField name='settings.avalara.commitDocuments' class='form-control'}}
    </div>
    <div class="panel-body">
      <a href="https://admin-development.avalara.net">Administrators Panel</a>
    </div>


    <div class="panel-body">
      <button type="button" class="btn btn-default pull-right" data-event-action="testCredentials" data-i18n="admin.dashboard.avalaraTestCredentials">
        Test Credentials
      </button>
    </div>
    <div class="panel-body">
      {{> shopSettingsSubmitButton}}
    </div>
  {{/autoForm}}

  {{#if loggingEnabled}}
    <div class="panel-body">
      <div>
        {{> React logGrid }}
      </div>
    </div>
    {{#if instance.state.get 'isEditing'}}
      {{#if instance.state.get 'editingId'}}
          <div>
            {{#autoForm
              collection=logCollection
              schema=logSchema
              id="log-view-form"
              template="bootstrap3-inline"
              doc=logEntry
            }}

              <div class="panel panel-default">
                <div class="panel-body">
                  <div class="form-group">
                    {{>afQuickField name="date" class="form-control" disabled=true}}
                    {{>afQuickField name="data" class="form-control" type="textarea" rows="15"}}
                  </div>
                </div>
              </div>

            {{/autoForm}}
          </div>

        {{/if}}
      {{/if}}
    {{/if}}
</template>


